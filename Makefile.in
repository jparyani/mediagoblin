VPATH = @srcdir@
PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_STRING = @PACKAGE_STRING@
PACKAGE_TARNAME = @PACKAGE_TARNAME@
PACKAGE_URL = @PACKAGE_URL@
PACKAGE_VERSION = @PACKAGE_VERSION@
PATH_SEPARATOR = @PATH_SEPARATOR@
PYTHON = @PYTHON@
VIRTUALENV = @VIRTUALENV@
SPHINXBUILD = @SPHINXBUILD@
SHELL = @SHELL@
MKDIR_P = @MKDIR_P@
INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_SCRIPT = @INSTALL_SCRIPT@
docdir = @docdir@
dvidir = @dvidir@
exec_prefix = @exec_prefix@
htmldir = @htmldir@
includedir = @includedir@
infodir = @infodir@
prefix = @prefix@
srcdir = @srcdir@
datadir = @datadir@
datarootdir = @datarootdir@
pythondir = @pythondir@
pyexecdir = @pyexecdir@
pkgdatadir = $(datadir)/@PACKAGE_NAME@
pkgincludedir = $(includedir)/@PACKAGE_NAME@
pkgpythondir = @pkgpythondir@
pkgpyexecdir = @pkgpyexecdir@
PYTHONPATH = $(pythondir)$(PATH_SEPARATOR)$(DESTDIR)$(pythondir)

INSTALL_TARGET = develop

all: install


.PHONY: all install uninstall distclean info install-html html install-pdf pdf install-dvi dvi install-ps ps clean dist check installdirs


install: installdirs
	$(NORMAL_INSTALL)
ifneq ($(VIRTUALENV),no)
	$(VIRTUALENV) $(VIRTUALENV_FLAGS) $(DESTDIR)$(prefix) || $(VIRTUALENV) $(DESTDIR)$(prefix)
	$(DESTDIR)$(prefix)/bin/python $(srcdir)/setup.py $(INSTALL_TARGET) --prefix=$(DESTDIR)$(prefix)
else
	$(PYTHON) $(srcdir)/setup.py $(INSTALL_TARGET) --prefix=$(DESTDIR)$(prefix)
endif
	$(INSTALL_SCRIPT) $(srcdir)/lazyserver.sh $(DESTDIR)$(pkgdatadir)
	$(INSTALL_SCRIPT) $(srcdir)/lazycelery.sh $(DESTDIR)$(pkgdatadir)
	$(INSTALL_SCRIPT) $(srcdir)/lazystarter.sh $(DESTDIR)$(pkgdatadir)
	$(INSTALL_DATA) $(srcdir)/mediagoblin.ini $(DESTDIR)$(pkgdatadir)
	$(INSTALL_DATA) $(srcdir)/paste.ini $(DESTDIR)$(pkgdatadir)


uninstall: $(wildcard $(srcdir)/docs/source/*)
	rm -rf $(DESTDIR)$(pkgdatadir)
	rm -rf $(DESTDIR)$(htmldir)
	rm -rf $(DESTDIR)$(pdfdir)


clean:
	$(PYTHON) setup.py clean


distclean: $(wildcard $(srcdir)/docs/source/*)
	rm $(srcdir)/config.log
	rm $(srcdir)/config.status


$(DESTDIR)$(infodir)/gnumediagoblin.info: docs/build/texinfo/gnumediagoblin.info
	$(POST_INSTALL)
	$(INSTALL_DATA) @< $(DESTDIR)$@
	if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then
		install-info --dir-file=$(DESTDIR)$(infodir)/dir \
				$(DESTDIR)$(infodir)/gnumediagoblin.info;
	else true; fi

info: docs/build/texinfo/gnumediagoblin.info

docs/build/texinfo/gnumediagoblin.info: $(wildcard docs/source/*)
ifneq ($(SPHINX_BUILD),no)
	$(MAKE) -C docs info SPHINXBUILD=$(SPHINXBUILD)
endif


install-html: html installdirs
	$(INSTALL_DATA) docs/build/html/* $(DESTDIR)$(htmldir)

html: docs/build/html/index.html

docs/build/html/index.html: $(wildcard $(srcdir)/docs/source/*)
ifneq ($(SPHINX_BUILD),no)
	$(MAKE) -C docs html SPHINXBUILD=$(SPHINXBUILD)
endif


install-pdf: pdf installdirs
	$(INSTALL_DATA) docs/build/latex/GNUMediaGoblin.pdf $(DESTDIR)$(pdfdir)

pdf: docs/build/latex/GNUMediaGoblin.pdf

docs/build/latex/GNUMediaGoblin.pdf: $(wildcard $(srcdir)/docs/source/*)
ifneq ($(SPHINX_BUILD),no)
	$(MAKE) -C docs latexpdf SPHINXBUILD=$(SPHINXBUILD)
endif


install-dvi:

dvi:

install-ps:

ps:


dist:
	$(PYTHON) setup.py sdist

check:
	$(PYTHON) setup.py check

installdirs:
	$(MKDIR_P) \
		$(DESTDIR)$(pkgpythondir) \
		$(DESTDIR)$(pkgdatadir) \
		$(DESTDIR)$(htmldir) \
		$(DESTDIR)$(pdfdir)
